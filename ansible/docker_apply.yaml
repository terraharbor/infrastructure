---
- name: Apply configuration to Debian VMs
  hosts: azure_vms
  vars:

  tasks:
    - name: Run docker_apply from docker role
      ansible.builtin.include_role:
        name: docker
        tasks_from: docker_apply
      vars:
        docker_apply_env_variables:
          PG_ROOT_PASSWORD: !vault |
            $ANSIBLE_VAULT;1.2;AES256;docker_compose_apply
            38376531373062303534336232336637316535306135646239303738313763656138393865366639
            3831636563653732356365633736306664633631303462390a616231666664663761383034626436
            32636464646664636165633133366366366232323336666237623832306333356334363362373037
            3230353735373166310a306565363364623866313431613034336561343436373438383861323066
            61623632653262356330316234303735663832393537393238666461336234633333
          TERRAHARBOR_DB_PASSWORD: !vault |
            $ANSIBLE_VAULT;1.2;AES256;docker_compose_apply
            37356665653338353537643834633637623130663138663332306439386237396631356165356230
            6264346630626262666430363936633466333739326165640a666562343031346233646338393238
            30366232393965623065383866653532646537313262643038303735306333613837663761353832
            3364373239356234650a626534663830376332336533643666363537636239316231633865363736
            39663235386233643964623134333238636239376161323833376335636630313161
          FRONTEND_IMAGE_VERSION: "{{ lookup('ansible.builtin.env', 'FRONTEND_IMAGE_VERSION', default='latest') }}"
          BACKEND_IMAGE_VERSION: "{{ lookup('ansible.builtin.env', 'BACKEND_IMAGE_VERSION', default='latest') }}"
